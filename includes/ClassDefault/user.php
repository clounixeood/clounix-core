<?php
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function pnUserLoggedIn() 
{
	//Controllo se l'utente è loggato
  if (pnSessionGetVar('uid') > 0) { return true; } else { return false; } 
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function pnUserGetVars($uid)
{
     
     //Parametro globale
     global $mysqli;
     
     //Valore intero dell'uid
     $uid = intval($uid);
     
     //Eseguo la queri
     $res = $mysqli->query("SELECT * FROM _users WHERE _users.uid='$uid'");
     
     //Prendo tutte le variabili
     $var = $res->fetch_array();
     
     //Ritorno array di variabili
     return $var;	

}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function pnUserGetVar($name, $uid = -1)
{
    
    //Se il nome è vuoto
    if (empty($name)) { return array(); }
    
    //Se non viene specificato uid prendo quello della sessione
    if (($uid < 1) || empty($uid))  { $uid = pnSessionGetVar('uid'); }

    
    //Se viene specificato uid
    if ($uid > 0) { 
		
    //Setto la variabile
    $uservars[$uid] = pnUserGetVars($uid);    
    
    //Ritorno la variabile specifica
    return $uservars[$uid][$name];
    
    //Altrimenti ritorno un array vuoto
    } else { 
    
    return array(); 
    
    }

}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function pnUserGetMemberOf($uid = '')
{

     //Parametro globale
     global $mysqli;

     //Se non imposto uid prendo dalla sessione 
     if ($uid == '') { $uid = PnSessionGetVar('uid'); }
     
     //Eseguo la query
     $q = $mysqli->query("SELECT pn_gid FROM _group_membership WHERE pn_uid='$uid' LIMIT 1");
     
     //Grupppo
     $gid = $q->fetch_row();
 
 
 return $gid[0];
}
?>
